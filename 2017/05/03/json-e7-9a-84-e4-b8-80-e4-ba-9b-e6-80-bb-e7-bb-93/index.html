<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Shady"><title>Json的一些总结 · Libx</title><meta name="description" content="Json，son，on，n前几天五一没什么事就终于开始学习ajax了，然而现在还只是停留在文档的阶段，没有实际的应用。然后就是在看JSON的文档和一些博客，感觉自己应该是学到了一些东西，所以现在来总结一下。

这是MDN上对json的描述JSON 是一种语法用来序列化对象、数组、数值、字符串、布尔值"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><h3 title=""><a href="/">Libx</a></h3><div class="description"><p>Thoughts,stories and ideas</p></div></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>© 2017 — 2018 ❤ Shady</span></a></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Json的一些总结</a></h3></div><div class="post-content"><h3 id="Json，son，on，n"><a href="#Json，son，on，n" class="headerlink" title="Json，son，on，n"></a>Json，son，on，n</h3><p>前几天五一没什么事就终于开始学习ajax了，然而现在还只是停留在文档的阶段，没有实际的应用。然后就是在看JSON的文档和一些博客，感觉自己应该是学到了一些东西，所以现在来总结一下。</p>
<hr>
<h4 id="这是MDN上对json的描述"><a href="#这是MDN上对json的描述" class="headerlink" title="这是MDN上对json的描述"></a>这是MDN上对json的描述</h4><p><strong>JSON</strong> 是一种语法用来序列化对象、数组、数值、字符串、布尔值和NULL。<br>它基于 JavaScript 语法，但与之不同：<strong>一些JavaScript不是JSON，一些JSON不是JavaScript</strong></p>
<p>所以说，首先，json是一种数据的格式，基于文本，相比于XML更加轻量。易于阅读、编写和机器解析，而因为jSON有着这些特点，所以json被广泛的应用于数据交换。</p>
<p>以ajax的post请求来举个栗子：</p>
<ol>
<li>前端构造一个jS对象，用于包装要传递的数据，然后将JS对象转换为json字符串，将请求发送到后端；</li>
<li>后端（以PHP为例）接受到这个json字符串，将其解析为php对象，然后处理请求。<br>可知：JSON在整个过程中会有3种形式：前端的JS对象，传输中的JSON字符串。</li>
</ol>
<hr>
<h4 id="json和js对象的关系："><a href="#json和js对象的关系：" class="headerlink" title="json和js对象的关系："></a>json和js对象的关系：</h4><p>我觉得这个跟java和javascript有着异曲同工之妙。。。JSON的全名是：Javascript Object Notation，他的语法是基于JS的。但只是一种格式。这里有一篇文章：<a href="http://timelessrepo.com/json-isnt-a-javascript-subset" target="_blank" rel="external">JSON: The JavaScript subset that isn’t</a>.</p>
<p>接下来又是mdn的东西：</p>
<p><table><caption>JavaScript 与 JSON 的区别</caption></table></p>
<p><thead></thead></p>
<p><tr></tr></p>
<p><th scope="col"></th></p>
<pre>JavaScript类型</pre>

<th scope="col">
<pre>JSON 区别</pre>
</th>


<tbody>
<tr>
<td>对象和数组</td>
<td>属性名称必须是双引号字符串；后缀逗号被禁止。

最后一个属性后面不能有逗号。</td>
</tr>
<tr>
<td>数值</td>
<td>前导0是禁止的（在JSON.stringify 0将被忽略，但在JSON.parse它将抛出SyntaxError）；小数点后必须至少有一位数字。</td>
</tr>
<tr>
<td>字符串</td>
<td>只有有限的一些字符可能会被转义；禁止某些控制字符; Unicode 行分隔符 ([U+2028](http://unicode-table.com/cn/2028/)) 和段分隔符 ([U+2029](http://unicode-table.com/cn/2029/))被允许 ; 字符串必须是双引号。

请参见以下示例，其中 [`JSON.parse()`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse "JSON.parse() 方法解析一个JSON字符串，构造由字符串描述的JavaScript值或对象。可以提供可选的reviver函数以在返回之前对所得到的对象执行变换。") 能够正常解析，但把它当作JavaScript解析时会抛出 [`SyntaxError`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError "SyntaxError 对象代表尝试解析语法上不合法的代码的错误。") 错误:

<span class="token keyword">let</span> code <span class="token operator">=</span> <span class="token string">'"\u2028\u2029"'</span><span class="token punctuation">;</span>

JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment" spellcheck="true">// 工作正常</span>

<span class="token function">eval</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment" spellcheck="true">// 失败</span>`
</td>
</tr>
</tbody>

来几个例子（这个是copy的懒得打了。。）：

<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> obj1 = &#123;&#125;; <span class="comment">// 这只是 JS 对象</span></div><div class="line"></div><div class="line"><span class="comment">// 可把这个称做：JSON 格式的 JavaScript 对象 </span></div><div class="line"><span class="keyword">var</span> obj2 = &#123;<span class="string">"width"</span>:<span class="number">100</span>,<span class="string">"height"</span>:<span class="number">200</span>,<span class="string">"name"</span>:<span class="string">"rose"</span>&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 可把这个称做：JSON 格式的字符串</span></div><div class="line"><span class="keyword">var</span> str1 = <span class="string">'&#123;"width":100,"height":200,"name":"rose"&#125;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 这个可叫 JSON 格式的数组，是 JSON 的稍复杂一点的形式</span></div><div class="line"><span class="keyword">var</span> arr = [  </div><div class="line">&#123;<span class="string">"width"</span>:<span class="number">100</span>,<span class="string">"height"</span>:<span class="number">200</span>,<span class="string">"name"</span>:<span class="string">"rose"</span>&#125;,</div><div class="line">&#123;<span class="string">"width"</span>:<span class="number">100</span>,<span class="string">"height"</span>:<span class="number">200</span>,<span class="string">"name"</span>:<span class="string">"rose"</span>&#125;,</div><div class="line">&#123;<span class="string">"width"</span>:<span class="number">100</span>,<span class="string">"height"</span>:<span class="number">200</span>,<span class="string">"name"</span>:<span class="string">"rose"</span>&#125;,</div><div class="line">];</div><div class="line"></div><div class="line"><span class="comment">// 这个可叫稍复杂一点的 JSON 格式的字符串 </span></div><div class="line"><span class="keyword">var</span> str2=<span class="string">'['</span>+  </div><div class="line"><span class="string">'&#123;"width":100,"height":200,"name":"rose"&#125;,'</span>+</div><div class="line"><span class="string">'&#123;"width":100,"height":200,"name":"rose"&#125;,'</span>+</div><div class="line"><span class="string">'&#123;"width":100,"height":200,"name":"rose"&#125;,'</span>+</div><div class="line"><span class="string">']'</span>;</div></pre></td></tr></table></figure>

#### JS中关于json的两个函数：JSON.parse()     JSON.stringify()

json.parse()和json.stringify()可以说是对应的两种函数，但是又不完全相对。。前者对格式的要求极高错一点都不行，错一点就会让你一直debug。而后者就很聪明了，只要你写的是一个JS对象他就能把你序列化出来，惊不惊喜，意不意外？

* * *

下面来详细的说一下两个函数：

<del>json.parse()</del>...还是先说JSON.stringify()吧比较合适：//`**JSON.stringify()**` 方法将一个JavaScript值转换为一个JSON字符串，如果指定了一个replacer函数，则可以替换值，或者如果指定了一个replacer数组，可选地仅包括指定的属性。语法为：
<pre class="syntaxbox">`JSON.stringify(_value_[, _replacer_ [, _space_]])`</pre>
虽然一般使用的时间只会传入一个JSON格式的value但是还有另外两个参数；

##### 参数：

<dl>
     <dt>`value`</dt>
     <dd>将要序列化成 一个JSON 字符串的值。</dd>
     <dt>`replacer` <span class="inlineIndicator optional optionalInline">可选</span></dt>
     <dd>如果该参数是一个函数，则在序列化过程中，被序列化的值的每个属性都会经过该函数的转换和处理；如果该参数是一个数组，则只有包含在这个数组中的属性名才会被序列化到最终的 JSON 字符串中；如果该参数为null或者未提供，则对象所有的属性都会被序列化；关于该参数更详细的解释和示例，请参考[使用原生的 JSON 对象](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_native_JSON#The_replacer_parameter)一文。</dd>
     <dt>`space` <span class="inlineIndicator optional optionalInline">可选</span></dt>
     <dd>指定缩进用的空白字符串，用于美化输出（pretty-print）；如果参数是个数字，它代表有多少的空格；上限为10。改值若小于1，则意味着没有空格；如果该参数为字符串(字符串的前十个字母)，该字符串将被作为空格；如果该参数没有提供（或者为null）将没有空格</dd>
</dl>
对于序列化还有以下这些注意点：

*   非数组对象的属性不能保证以特定的顺序出现在序列化后的字符串中。
*   布尔值、数字、字符串的包装对象在序列化过程中会自动转换成对应的原始值。
*   `undefined、`任意的函数以及 symbol 值，在序列化过程中会被忽略（出现在非数组对象的属性值中时）或者被转换成 `null`（出现在数组中时）。
*   所有以 symbol 为属性键的属性都会被完全忽略掉，即便 `replacer` 参数中强制指定包含了它们。
*   不可枚举的属性会被忽略

* * *

接下来是jSON.parse()

语法：
<pre class="syntaxbox">JSON.parse(_text_[, _reviver_])</pre>

<h5 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h5><dl><br>     <dt><code>text</code></dt><br>     <dd>要被解析成JavaScript值的字符串。</dd><br>     <dt><code>reviver</code> <span class="inlineIndicator optional optionalInline">可选</span></dt><br>     <dd>如果是一个函数，则规定了原始值在被返回之前如何被解析改造。</dd><br></dl>

<h5 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h5><p><code>Object</code>对应给定的JSON文本。</p>
<h5 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h5><p>若被解析的 JSON 字符串是非法的，则会抛出 一个<code>语法错误</code>异常</p>
<h5 id="JSON-parse-不允许用逗号作为结尾："><a href="#JSON-parse-不允许用逗号作为结尾：" class="headerlink" title="JSON.parse() 不允许用逗号作为结尾："></a><code>JSON.parse()</code> 不允许用逗号作为结尾：</h5><p><pre class="example-bad brush: js line-numbers language-js">`<span class="token comment" spellcheck="true">// 都将抛出 SyntaxError</span><br>JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">“[1, 2, 3, 4, ]”</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">‘{“foo” : 1, }’</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></p>
<hr>
<p>嗯，感觉大概就想这么多吧。以后再加~这里要立一个flag，下周周末前要把AJAX搞会！！</p>
<p>Done~</p>
<p>写线代作业啊啊啊啊啊。。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-05-03</span><i class="fa fa-tag"></i><a class="tag" href="/categories/技术/" title="技术">技术 </a><a class="tag" href="/tags/JS/" title="JS">JS </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://stan1812.github.io/2017/05/03/json-e7-9a-84-e4-b8-80-e4-ba-9b-e6-80-bb-e7-bb-93/,Libx,Json的一些总结,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2017/05/12/canvas-e5-ad-a6-e4-b9-a0-ef-bc-9asave-restore/" title="Canvas学习：save &amp; restore">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2017/05/03/hello-world/" title="Hello Hexo">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>