<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Shady"><title>浅析struct · Libx</title><meta name="description" content="先留坑，空下来来写
typedef是什么typedef为C语言的关键字，作用是为一种数据类型定义一个新名字。这里的数据类型包括内部数据类型（int,char等）和自定义的数据类型（struct等）。
在编程中使用typedef目的一般有两个，一个是给变量一个易记且意义明确的新名字，另一个是简化一些比"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><h3 title=""><a href="/">Libx</a></h3><div class="description"><p>Thoughts,stories and ideas</p></div></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>© 2017 — 2018 ❤ Shady</span></a></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>浅析struct</a></h3></div><div class="post-content"><p>先留坑，空下来来写</p>
<h3 id="typedef是什么"><a href="#typedef是什么" class="headerlink" title="typedef是什么"></a>typedef是什么</h3><p>typedef为C语言的关键字，作用是为一种数据类型定义一个新名字。这里的数据类型包括内部数据类型（int,char等）和自定义的数据类型（struct等）。</p>
<p>在编程中使用typedef目的一般有两个，一个是给变量一个易记且意义明确的新名字，另一个是简化一些比较复杂的类型声明。</p>
<h3 id="使用struct"><a href="#使用struct" class="headerlink" title="使用struct"></a>使用struct</h3><h4 id="结构声明"><a href="#结构声明" class="headerlink" title="结构声明"></a>结构声明</h4><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">person</span> &#123;</span></div><div class="line"><span class="keyword">int</span> age;</div><div class="line"><span class="keyword">int</span> height;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>该声明描述了一个由两个整形所组成的结构，但并未创建实际的数据对象，只是描述了该对象由什么组成（可称之为“模板”，因为他勾勒出该结构是如何存数数据的，突然想起js的构造函数。。）</p>
<p>下面来分析一下细节：<br>首先：关键字struct，它表明跟在后面的是一个结构，后面是一个可选的标记“S1”，稍后程序中可以使用该标记引用该结构，例如：<br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">person</span> <span class="title">me</span>;</span></div></pre></td></tr></table></figure></p>
<p>这把<code>me</code>声明为一个使用<code>person</code>结构的结构变量</p>
<h4 id="定义结构变量"><a href="#定义结构变量" class="headerlink" title="定义结构变量"></a>定义结构变量</h4><p>结构有两层含义：一是结构布局，结构布局告诉编译器如何表示数据，但是并未让编译器为数据分配空间。 之后就是需要创建一个结构变量，即是另外一个含义。<br>在<code>struct person me;</code>中，<code>struct person</code>所起的作用就是相当于一般声明中的int float<br>可以定义两个<code>struct person</code>类型的变量，甚至是一个指向<code>struct person</code>类型结构的指针。<br><code>struct person me, xiaoming ,*xiaohong;</code></p>
<p>就计算机而言：<code>struct person me</code>是以下声明的简化：<br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">person</span> &#123;</span></div><div class="line"><span class="keyword">int</span> age;</div><div class="line"><span class="keyword">int</span> height;</div><div class="line">&#125; me;</div></pre></td></tr></table></figure></p>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>以上，可知，声明结构的过程和定义结构变量的过程可以组合长一个步骤<br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> &#123;</span></div><div class="line"><span class="keyword">int</span> age;</div><div class="line"><span class="keyword">int</span> height;</div><div class="line">&#125; me;</div></pre></td></tr></table></figure></p>
<p>然而，如果需要多次使用，就必须使用带标记的形式，或者使用接下来要介绍的<code>typedef</code></p>
<p>ps：这只是定义结构变量，并未初始化结构变量</p>
<h3 id="使用typedef"><a href="#使用typedef" class="headerlink" title="使用typedef"></a>使用typedef</h3><h4 id="typedef与结构结合使用"><a href="#typedef与结构结合使用" class="headerlink" title="typedef与结构结合使用"></a>typedef与结构结合使用</h4><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">tagMyStruct</span></span></div><div class="line"><span class="class">&#123;</span> </div><div class="line">　<span class="keyword">int</span> iNum;</div><div class="line">　<span class="keyword">long</span> lLength;</div><div class="line">&#125; MyStruct;</div></pre></td></tr></table></figure>
<p>这语句实际上完成两个操作：</p>
<p>1) 定义一个新的结构类型<br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">tagMyStruct</span></span></div><div class="line"><span class="class">&#123;</span> </div><div class="line">　<span class="keyword">int</span> iNum; </div><div class="line">　<span class="keyword">long</span> lLength; </div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>分析：tagMyStruct称为“tag”，即“标签”，实际上是一个临时名字，struct 关键字和tagMyStruct一起，构成了这个结构类型，不论是否有typedef，这个结构都存在。</p>
<p>我们可以用struct tagMyStruct varName来定义变量，但要注意，使用tagMyStruct varName来定义变量是不对的，因为struct 和tagMyStruct合在一起才能表示一个结构类型。</p>
<p>2) typedef为这个新的结构起了一个名字，叫MyStruct。</p>
<p>  <code>typedef struct tagMyStruct MyStruct;</code></p>
<p>因此，MyStruct实际上相当于struct tagMyStruct，我们可以使用MyStruct varName来定义变量</p>
<h4 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h4><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">x1</span> &#123;</span> ...&#125;x1; </div><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">x2</span>&#123;</span> ...&#125; x2;</div><div class="line">``` </div><div class="line">有什么不同？ </div><div class="line">其实, 前者是定义了类`_x1`和`_x1`的对象实例`x1`, 后者是定义了类`_x2`和`_x2`的类别名`x2`</div><div class="line"></div><div class="line">所以它们在使用过程中是有区别的</div><div class="line">实例：</div><div class="line">```C++</div><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">int</span> num;</div><div class="line"><span class="keyword">int</span> age;</div><div class="line">&#125;aaa,bbb,ccc;</div></pre></td></tr></table></figure>
<p>这算什么呢？<br>这相当于<br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line"><span class="keyword">int</span> num;</div><div class="line"><span class="keyword">int</span> age;</div><div class="line">&#125;aaa；</div><div class="line"><span class="keyword">typedef</span> aaa bbb;</div><div class="line"><span class="keyword">typedef</span> aaa ccc;</div></pre></td></tr></table></figure></p>
<p>也就是说aaa,bbb,ccc三者都是结构体类型。声明变量时用任何一个都可以,在c++中也是如此。但是你要注意的是这个在c++中如果无typedef关键字，那么aaa，bbb，ccc将是截然不同的三个对象。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>(这个问答是在CSDN看到的，<a href="http://blog.csdn.net/haiou0/article/details/6877718" target="_blank" rel="external">链接在此</a>因为对C和C++学习的并不深入，所以直接拿来了~)<br>Q：用struct和typedef struct 定义一个结构体有什么区别？为什么会有两种方式呢？<br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> </span></div><div class="line"><span class="class">&#123;</span> </div><div class="line"><span class="keyword">int</span> a; </div><div class="line">&#125; stu;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Student2</span> </span></div><div class="line"><span class="class">&#123;</span> </div><div class="line"><span class="keyword">int</span> a; </div><div class="line">&#125;stu2;</div></pre></td></tr></table></figure></p>
<p>A：</p>
<p>事实上，这个东西是从C语言中遗留过来的，typedef可以定义新的复合类型或给现有类型起一个别名，在C语言中，如果你使用 <code>struct xxx {...};</code> 的方法，使用时就必须用<code>struct xxx var</code> 来声明变量，而使用 <code>typedef struct {...}</code>的方法 就可以写为<code>xxx var</code>;<br>不过在C++中已经没有这回事了，无论你用哪一种写法都可以使用第二种方式声明变量，这个应该算是C语言的糟粕。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-10-17</span><i class="fa fa-tag"></i><a class="tag" href="/categories/技术/" title="技术">技术 </a><a class="tag" href="/tags/数据结构/" title="数据结构">数据结构 </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://stan1812.github.io/2017/10/17/structDef/,Libx,浅析struct,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2017/11/06/JSOO/" title="JS中的各种继承">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2017/10/17/event-loop/" title="Javascript事件循环机制">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>