<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Shady"><title>微信小程序之不完全胡乱指东西南北 · Libx</title><meta name="description" content="今天考完了试，很开心，晚上没什么事，来写篇博客。
先吹吹水在期末考试之前的某段时间，差不多就是跳一跳火的那段时间吧，由于无聊，去微信公众平台注册了一个账号，然后就对着文档开始了小程序的玩耍之路。之前虽然小程序挺火的，但是也一直没有什么兴趣去看。。主要还是感觉限制太多了叭，个人总感觉小程序，毕竟还是微"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><h3 title=""><a href="/">Libx</a></h3><div class="description"><p>Thoughts,stories and ideas</p></div></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>© 2017 — 2018 ❤ Shady</span></a></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">Home</a></li><li><a href="/about">Sobre</a></li><li><a href="/archives">Arquivo</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>微信小程序之不完全胡乱指东西南北</a></h3></div><div class="post-content"><p>今天考完了试，很开心，晚上没什么事，来写篇博客。</p>
<h3 id="先吹吹水"><a href="#先吹吹水" class="headerlink" title="先吹吹水"></a>先吹吹水</h3><p>在期末考试之前的某段时间，差不多就是跳一跳火的那段时间吧，由于无聊，去微信公众平台注册了一个账号，然后就对着文档开始了小程序的玩耍之路。之前虽然小程序挺火的，但是也一直没有什么兴趣去看。。主要还是感觉限制太多了叭，个人总感觉小程序，毕竟还是微信一家的东西。像我这种菜鸡也就玩一玩叭。</p>
<p>之前看到过一个有点火的小程序，是一个显示手机信息的小工具，就是比如手机的内存啊，型号什么的信息，然后就有了好几万的用户，然后在我看了小程序的文档之后发现了一个这样的API<code>wx.getSystemInfo(OBJECT)</code>。基本上就是这个API了叭。。选对了目标用户真的是能飞。</p>
<h3 id="开放的API"><a href="#开放的API" class="headerlink" title="开放的API"></a>开放的API</h3><p>小程序所开放的能力感觉还是很强的，非常方便的就能调用手机的各种接口，文件，设备，包括GPS，网络状态，罗盘等，甚至对于剪切板这个东西，浏览器出于安全考虑一直不肯完全放开权限，要写各种hack的东西，微信也提供了很好的封装<code>wx.getClipboardData(OBJECT)</code> <code>wx.setClipboardData(OBJECT)</code>，这是微信有点大胆？（也可能是我多想了）不错。</p>
<p>除此之外，小程序的媒体能力也很丰富，录音，视频，相机，甚至实时音视频接口都有提供。对于我们这种辣鸡开发者确实是些可玩性很强的东西。</p>
<p>网络方面，除了常规的request，还提供了websocket的接口，确实是很周到。然后也开放了设置导航条，tabBar，置顶信息的API，给了更大的客户定制能力。</p>
<p>至于API，其他的不多说了。文档说的不能再清楚了。</p>
<h3 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h3><h4 id="文件格式"><a href="#文件格式" class="headerlink" title="文件格式"></a>文件格式</h4><ul>
<li>.json  JSON 配置文件(package.json)</li>
<li>.wxml  WXML 模板文件(.html/.vue)</li>
<li>.wxss  WXSS 样式文件</li>
<li>.js    JS 脚本逻辑文件<h4 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h4>这是我写的一小demo</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">[root@VM_56_194_centos wechat_demo]<span class="comment"># tree -L 2</span></div><div class="line">.</div><div class="line">|-- app.js </div><div class="line">|-- app.json //当前小程序的全局配置，包括了小程序的所有页面路径、界面表现、网络超时时间、底部 tab 等</div><div class="line">|-- app.wxss</div><div class="line">|-- main.js</div><div class="line">|-- main.json</div><div class="line">|-- main.wxml</div><div class="line">|-- pages</div><div class="line">|   |-- artlist</div><div class="line">|   |   |-- list.js</div><div class="line">|   |   |-- list.json</div><div class="line">|   |   |-- list.wxml</div><div class="line">|   |   `-- list.wxss</div><div class="line">|   |-- index</div><div class="line">|   |   |-- index.js</div><div class="line">|   |   |-- index.wxml</div><div class="line">|   |   `-- index.wxss</div><div class="line">|   `-- logs</div><div class="line">|       |-- logs.js</div><div class="line">|       |-- logs.json</div><div class="line">|       |-- logs.wxml</div><div class="line">|       `-- logs.wxss</div><div class="line">|-- project.config.json</div><div class="line">|-- README.md</div><div class="line">|-- utils</div><div class="line">|   `-- util.js</div><div class="line">`-- wxParse</div><div class="line">    |-- emojis</div><div class="line">    |-- html2json.js</div><div class="line">    |-- htmlparser.js</div><div class="line">    |-- showdown.js</div><div class="line">    |-- wxDiscode.js</div><div class="line">    |-- wxParse.js</div><div class="line">    |-- wxParse.wxml</div><div class="line">    `-- wxParse.wxss</div></pre></td></tr></table></figure>
<p>这是一个每日一文的小东西，每天随机推荐一片文章。</p>
<p>其实结构还是很清晰的。。wxparse是一个解析HTML的工具，因为获取的文章数据是带html标签的，需要解析，但是小程序没有像V-html这样舒服东西，所以要找其他的工具，但是使用起来需要直接把文件手动复制到目录下，没有开放的包管理器，可能这就是相对比较封闭的一些劣势吧。</p>
<h3 id="大概思想"><a href="#大概思想" class="headerlink" title="大概思想"></a>大概思想</h3><p>依然是如今最火的MVVM思想，数据驱动，挺多地方和Vue还是很像的，要想上手做些demo还是挺快的。基本是都是常见的数据绑定，然后各种 <strong>钩子函数</strong>。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">Page(&#123;</div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 页面的初始数据</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  data: &#123;&#125;,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onLoad: <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;&#125;,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 生命周期函数--监听页面初次渲染完成</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onReady: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 生命周期函数--监听页面显示</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onShow: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 生命周期函数--监听页面隐藏</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onHide: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 生命周期函数--监听页面卸载</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onUnload: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 页面相关事件处理函数--监听用户下拉动作</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onPullDownRefresh: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 页面上拉触底事件的处理函数</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onReachBottom: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 用户点击右上角分享</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onShareAppMessage: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>还是比较容易理解的。</p>
<p>组件之间的通信，数据管理，应该是相对来说比较重要的东西了。但是文档中没有提太多，然后这里有一篇比较好的文章：<img src="https://segmentfault.com/a/1190000008895441" alt="https://segmentfault.com/a/1190000008895441"><br>比较容易想到的是，最粗暴的，使用localStorage，简单粗暴。然后比较好的方法应该是使用<code>globalData</code>来处理吧。<br>深一点的其他东西还讨论不来，就先这样吧~</p>
<p>溜了溜了睡觉睡觉，明天回家！！！🍭</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-01-24</span><i class="fa fa-tag"></i><a class="tag" href="/tags/技术/" title="技术">技术 </a><a class="tag" href="/tags/JS/" title="JS">JS </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://stan1812.github.io/2018/01/24/wechatapp/,Libx,微信小程序之不完全胡乱指东西南北,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2018/02/14/LearnKoa/" title="小程序&lt;宜墨&gt;开发小记">Post Anterior</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/01/13/parcel/" title="初探parcel📦">Próximo post</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>